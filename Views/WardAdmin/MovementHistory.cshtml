@model IEnumerable<ONT_3rdyear_Project.Models.Movement>
@{
    ViewData["Title"] = "Patient Movement History";
}

<div class="container pm-container">
    <h2 class="text-primary mb-3">
        <i class="bi bi-list-check pm-header-icon"></i> Movement History for @ViewBag.PatientName
    </h2>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success pm-alert alert-dismissible fade show" role="alert">
            <i class="bi bi-check-circle-fill me-2"></i> @TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger pm-alert alert-dismissible fade show" role="alert">
            <i class="bi bi-exclamation-triangle-fill me-2"></i> @TempData["ErrorMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    <div class="table-responsive shadow-sm rounded">
        <table class="table table-hover align-middle pm-table mb-0">
            <thead class="table-primary">
                <tr>
                    <th>From</th>
                    <th>To</th>
                    <th>Date/Time</th>
                    <th class="text-center">Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var movement in Model)
                {
                    <tr>
                        <td>@movement.FromLocation</td>
                        <td>@movement.ToLocation</td>
                        <td>@movement.TimeStamp.ToString("dd/MM/yyyy HH:mm")</td>
                        <td class="text-center">
                            <a class="btn btn-sm btn-warning pm-btn me-1" asp-action="EditMovement" asp-route-id="@movement.MovementID">
                                <i class="bi bi-pencil-square me-1"></i> Edit
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
